<div class="container">
  <div class="agendar-header">
    <h1>Agendar Servicio Técnico</h1>
    <p>Completa el formulario para programar tu servicio</p>
  </div>

  <div class="agendar-content">
    <form
      [formGroup]="agendarForm"
      (ngSubmit)="onSubmit()"
      class="agendar-form"
    >
      <!-- Información del Cliente -->
      <div class="form-section">
        <h3>Información Personal</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="nombre">Nombre Completo *</label>
            <input
              type="text"
              id="nombre"
              formControlName="nombre"
              placeholder="Tu nombre completo"
            />
            <div
              class="error"
              *ngIf="
                agendarForm.get('nombre')?.invalid &&
                agendarForm.get('nombre')?.touched
              "
            >
              El nombre es requerido
            </div>
          </div>
          <div class="form-group">
            <label for="email">Email *</label>
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="tu@email.com"
            />
            <div
              class="error"
              *ngIf="
                agendarForm.get('email')?.invalid &&
                agendarForm.get('email')?.touched
              "
            >
              Email válido es requerido
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="telefono">Teléfono *</label>
            <input
              type="tel"
              id="telefono"
              formControlName="telefono"
              placeholder="555-0101"
            />
            <div
              class="error"
              *ngIf="
                agendarForm.get('telefono')?.invalid &&
                agendarForm.get('telefono')?.touched
              "
            >
              Teléfono es requerido
            </div>
          </div>
          <div class="form-group">
            <label for="direccion">Dirección *</label>
            <input
              type="text"
              id="direccion"
              formControlName="direccion"
              placeholder="Tu dirección"
            />
            <div
              class="error"
              *ngIf="
                agendarForm.get('direccion')?.invalid &&
                agendarForm.get('direccion')?.touched
              "
            >
              Dirección es requerida
            </div>
          </div>
        </div>
      </div>

      <!-- Información del Servicio Seleccionado -->
      <div
        class="form-section"
        *ngIf="marcaSeleccionada || productoSeleccionado"
      >
        <h3>Información del Servicio</h3>
        <div class="form-row" *ngIf="marcaSeleccionada">
          <div class="form-group">
            <label>Marca del Producto</label>
            <input
              type="text"
              [value]="marcaSeleccionada"
              readonly
              class="readonly-input"
            />
          </div>
          <div class="form-group" *ngIf="productoSeleccionado">
            <label>Tipo de Producto</label>
            <input
              type="text"
              [value]="productoSeleccionado"
              readonly
              class="readonly-input"
            />
          </div>
        </div>
        <div class="form-row" *ngIf="modeloSeleccionado">
          <div class="form-group">
            <label>Modelo</label>
            <input
              type="text"
              [value]="modeloSeleccionado"
              readonly
              class="readonly-input"
            />
          </div>
          <div class="form-group" *ngIf="ubicacionSeleccionada">
            <label>Ubicación</label>
            <input
              type="text"
              [value]="ubicacionSeleccionada"
              readonly
              class="readonly-input"
            />
          </div>
        </div>
        <div class="form-group" *ngIf="sintomasSeleccionados">
          <label>Descripción de Síntomas</label>
          <textarea
            [value]="sintomasSeleccionados"
            readonly
            class="readonly-textarea"
            rows="3"
          ></textarea>
        </div>
      </div>

      <!-- Fecha y Hora -->
      <div class="form-section">
        <h3>Fecha y Hora</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="fecha">Fecha *</label>
            <input
              type="date"
              id="fecha"
              formControlName="fecha"
              [min]="minDate"
            />
            <div
              class="error"
              *ngIf="
                agendarForm.get('fecha')?.invalid &&
                agendarForm.get('fecha')?.touched
              "
            >
              Fecha es requerida
            </div>
          </div>
          <div class="form-group">
            <label for="hora">Hora *</label>
            <select id="hora" formControlName="hora">
              <option value="">Selecciona una hora</option>
              <option *ngFor="let hora of horasDisponibles" [value]="hora">
                {{ hora }}
              </option>
            </select>
            <div
              class="error"
              *ngIf="
                agendarForm.get('hora')?.invalid &&
                agendarForm.get('hora')?.touched
              "
            >
              Hora es requerida
            </div>
          </div>
        </div>
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="regresar()">
          Regresar
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="agendarForm.invalid || isSubmitting"
        >
          {{ isSubmitting ? "Agendando..." : "Agendar Servicio" }}
        </button>
      </div>
    </form>
  </div>
</div>
